{"version":3,"file":"commonHelpers.js","sources":["../src/js/api.js","../src/js/index.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = 'https://pixabay.com/api/'\nconst API_KEY = '21698474-fb36d7b3400c91ab3d227d6db'\n\nexport const per_page = 40\n\nexport const fetchImages = async (query = '', page = 1) => {\n  const params = new URLSearchParams({\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page,\n    page\n  })\n  try {\n    const responce = await axios.get(`${BASE_URL}?key=${API_KEY}&${params}`)\n    return responce.data\n  }\n  catch (err) {\n    console.log(err)\n    throw new Error(err)\n  }\n}","import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchImages } from './api'\nimport { per_page } from './api'\n\nconst formReff = document.querySelector('#search-form')\nconst galeryReff = document.querySelector('.gallery')\nconst loadMoreBtnReff = document.querySelector('.load-more')\n\nnew SimpleLightbox('.gallery a', { captions: true, captionDelay: 250 });\n\nlet formItems = {}\nlet page = 1\n\nformReff.addEventListener('submit', handleSubmit)\nloadMoreBtnReff.addEventListener('click', handleLoadMore)\n\nasync function handleSubmit(evt) {\n  galeryReff.innerHTML = ''\n  evt.preventDefault()\n  const formData = new FormData(evt.currentTarget)\n  formData.forEach((value, key) => {\n    formItems[key] = value\n  })\n\n  const images = await fetchImages(formItems.searchQuery, page)\n  createMarcup(images)\n  formReff.reset()\n}\n\nasync function createMarcup(data) {\n  const { hits, total } = data\n  console.log(data)\n  if (!hits.length) {\n    iziToast.show({\n      title: '',\n      color: 'red',\n      position: 'topRight',\n      message: \"Sorry, there are no images matching your search query. Please try again.\"\n    });\n    // loadMoreBtnReff.classList.add('visually-hidden')\n    return\n  }\n  if (hits.length >= per_page) {\n    iziToast.show({\n      title: '',\n      color: 'green',\n      position: 'topCenter',\n      message: `Hooray! We found totalHits images ${total}`\n    });\n  }\n\n  const marcup = hits.map(({\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads\n  }) => (\n    `\n    <li class='gallery__item'>\n      <div class=\"gallery__card\">\n        <a class=\"gallery__link\" href='${largeImageURL}'>\n          <img\n            class=\"gallery__image\"\n            src=${webformatURL} \n            alt=${tags} \n            data-source=\"${webformatURL}\" \n            loading=\"lazy\" />\n        </a>\n          <div class=\"info\">\n            <p class=\"info-item\">\n              <b>Likes</b>\n              ${likes}\n            </p>\n            <p class=\"info-item\">\n               <b>Views</b>\n                ${views}\n            </p>\n            <p class=\"info-item\">\n               <b>Comments</b>\n                ${comments}\n            </p>\n            <p class=\"info-item\">\n              <b>Downloads</b>\n               ${downloads}\n            </p>\n          </div>\n      </div>\n    </li>\n  `\n  )).join('')\n  // galeryReff.innerHTML = marcup\n  galeryReff.insertAdjacentHTML('beforeend', marcup)\n  loadMoreBtnReff.classList.remove('visually-hidden')\n}\n\nasync function handleLoadMore() {\n  page += 1\n  const images = await fetchImages(formItems.searchQuery, page)\n  createMarcup(images)\n  if (images.hits.length < per_page) {\n    loadMoreBtnReff.classList.add('visually-hidden')\n    iziToast.show({\n      title: '',\n      color: 'red',\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\"\n    });\n  }\n\n  const { height: cardHeight } = document\n    .querySelector(\".gallery\")\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n  });\n}\n"],"names":["BASE_URL","API_KEY","per_page","fetchImages","query","page","params","axios","err","formReff","galeryReff","loadMoreBtnReff","SimpleLightbox","formItems","handleSubmit","handleLoadMore","evt","value","key","images","createMarcup","data","hits","total","iziToast","marcup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","cardHeight"],"mappings":"+vBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAEHC,EAAW,GAEXC,EAAc,MAAOC,EAAQ,GAAIC,EAAO,IAAM,CACzD,MAAMC,EAAS,IAAI,gBAAgB,CACjC,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAAF,EACA,KAAAG,CACJ,CAAG,EACD,GAAI,CAEF,OADiB,MAAME,EAAM,IAAI,GAAGP,SAAgBC,KAAWK,GAAQ,GACvD,IACjB,OACME,EAAP,CACE,cAAQ,IAAIA,CAAG,EACT,IAAI,MAAMA,CAAG,CACpB,CACH,ECjBMC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAa,SAAS,cAAc,UAAU,EAC9CC,EAAkB,SAAS,cAAc,YAAY,EAE3D,IAAIC,EAAe,aAAc,CAAE,SAAU,GAAM,aAAc,GAAG,CAAE,EAEtE,IAAIC,EAAY,CAAE,EACdR,EAAO,EAEXI,EAAS,iBAAiB,SAAUK,CAAY,EAChDH,EAAgB,iBAAiB,QAASI,CAAc,EAExD,eAAeD,EAAaE,EAAK,CAC/BN,EAAW,UAAY,GACvBM,EAAI,eAAgB,EACH,IAAI,SAASA,EAAI,aAAa,EACtC,QAAQ,CAACC,EAAOC,IAAQ,CAC/BL,EAAUK,GAAOD,CACrB,CAAG,EAED,MAAME,EAAS,MAAMhB,EAAYU,EAAU,YAAaR,CAAI,EAC5De,EAAaD,CAAM,EACnBV,EAAS,MAAO,CAClB,CAEA,eAAeW,EAAaC,EAAM,CAChC,KAAM,CAAE,KAAAC,EAAM,MAAAC,CAAK,EAAKF,EAExB,GADA,QAAQ,IAAIA,CAAI,EACZ,CAACC,EAAK,OAAQ,CAChBE,EAAS,KAAK,CACZ,MAAO,GACP,MAAO,MACP,SAAU,WACV,QAAS,0EACf,CAAK,EAED,MACD,CACGF,EAAK,QAAUpB,GACjBsB,EAAS,KAAK,CACZ,MAAO,GACP,MAAO,QACP,SAAU,YACV,QAAS,qCAAqCD,GACpD,CAAK,EAGH,MAAME,EAASH,EAAK,IAAI,CAAC,CACvB,aAAAI,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,IACC;AAAA;AAAA;AAAA,yCAGqCL;AAAA;AAAA;AAAA,kBAGvBD;AAAA,kBACAE;AAAA,2BACSF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAMXG;AAAA;AAAA;AAAA;AAAA,kBAIEC;AAAA;AAAA;AAAA;AAAA,kBAIAC;AAAA;AAAA;AAAA;AAAA,iBAIDC;AAAA;AAAA;AAAA;AAAA;AAAA,GAMd,EAAE,KAAK,EAAE,EAEVtB,EAAW,mBAAmB,YAAae,CAAM,EACjDd,EAAgB,UAAU,OAAO,iBAAiB,CACpD,CAEA,eAAeI,GAAiB,CAC9BV,GAAQ,EACR,MAAMc,EAAS,MAAMhB,EAAYU,EAAU,YAAaR,CAAI,EAC5De,EAAaD,CAAM,EACfA,EAAO,KAAK,OAASjB,IACvBS,EAAgB,UAAU,IAAI,iBAAiB,EAC/Ca,EAAS,KAAK,CACZ,MAAO,GACP,MAAO,MACP,SAAU,WACV,QAAS,4DACf,CAAK,GAGH,KAAM,CAAE,OAAQS,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAE1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}